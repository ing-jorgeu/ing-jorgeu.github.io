<!doctype html>
<html>
<head>
    <meta charset="utf-8">

    <title>Seyfor</title>
    <meta name="description" content="Fencing">
    <meta name="author" content="ing.jorgeu@gmail.com">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link href="../css/bootstrap.min.css" rel="stylesheet">
    <link href="../css/bootstrap-theme.min.css" rel="stylesheet">
    <link href="../css/calendar.min.css" rel="stylesheet">
    <link href="../css/bootstrap-datetimepicker.min.css" rel="stylesheet">
    <link href="../css/style.css" rel="stylesheet">
    <style>
#calendar{
    background-color: white;
}

span.twitter-typeahead{
    width: 100%;
}

.tt-menu{
    width: 100%;
}

.tt-suggestion {
    background-color: white;
    height: 45px;
    border: 1px solid black;
    line-height: 45px;
}

.tt-suggestion:hover {
    background-color: black;
    color: white;
}

.tt-suggestion img {
    height: 40px;
}

.participant{
    background-color: white;
    height: 45px;
    border: 1px solid #cccccc;
    line-height: 45px;
    border-radius: 5px;
    margin-bottom: 5px;
}

.participant img {
    height: 40px;
}
    </style>
</head>
<body>
  <nav class="navbar navbar-default navbar-static-top" style="margin-bottom: 0;">
    <div class="container-fluid">
        <!-- Brand and toggle get grouped for better mobile display -->
        <div class="navbar-header">
          <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1" aria-expanded="false">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>
          <a class="navbar-brand" href="#" style="padding: 5px 15px;">
            <img alt="Brand" src="../img/seyfor_sport_technology_logo.png" style="height: 100%;">
          </a>
        </div>

        <!-- Collect the nav links, forms, and other content for toggling -->
        <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
          <ul class="nav navbar-nav">
            <li><a id="today">Today</a></li>
          </ul>
          <ul class="nav navbar-nav navbar-right">
            <li>
              <a href="#" style="">
                Jean-Pierre TORDA
              </a>
            </li>
            <li>
              <a href="#" style="padding: 2px 2px 2px 0;">
                <img src="../img/coach-jean-pierre-torda.jpg" style="height: 46px;border: 2px solid black;border-radius: 70px;width: 46px;">
              </a>
            </li>
          </ul>
        </div><!-- /.navbar-collapse -->
    </div><!-- /.container-fluid -->
    </nav>


    <div id="leftbar" class="leftbar-outer" style="background-color: black;position: absolute;left: 0;bottom: 0;top: 51px;width: 60px;">
        <div class="leftbar-middle">
            <div class="leftbar-inner">
                <a id="leftbar-toggler" href="#" onclick="$('#leftbar').toggleClass('open');$('#leftbar-toggler .glyphicon').toggleClass('glyphicon-menu-right').toggleClass('glyphicon-menu-left');"><span class="glyphicon glyphicon-menu-right" aria-hidden="true" style="font-size: 17px;"></span></a>
                <ul style="list-style-type: none;padding-left: 0;">
                    <li class="leftbar-icon"><a href="../index.html"><i class="fa fa-home" aria-hidden="true"></i> <span>Home</span></a></li>
                    <li class="leftbar-icon active"><a href="../trainings/index.html"><i class="fa fa-heartbeat" aria-hidden="true"></i> <span>Trainings</span></a></li>
                    <li class="leftbar-icon"><a href="../tournaments/new-tournament.html"><i class="fa fa-trophy" aria-hidden="true"></i> <span>Tournaments</span></a></li>
                    <li class="leftbar-icon"><a href="../fencers/index.html"><i class="fa fa-users" aria-hidden="true"></i> <span>Fencers</span></a></li>
                    <!--<li class="leftbar-icon"><a href="#"><i class="fa fa-hourglass" aria-hidden="true" style="margin: 0 11px;"></i> <span>Week Program</span></a></li>-->
                    <li class="leftbar-icon"><a href="../calendar/index.html"><i class="fa fa-calendar" aria-hidden="true"></i> <span>Calendar</span></a></li>
                </ul>
            </div>
        </div>
    </div>

    <div id="content" class="leftbar-outer">
        <div class="leftbar-middle">
            <div class="leftbar-inner">
                <div style="height:30px;width: 100%;">
                    <!--<a class="calendar-control" onclick="calendar.view('week');">Week</a> <a class="calendar-control" onclick="calendar.view('month');">Month</a>-->
                </div>
                <div id="calendar"></div>
            </div>
        </div>
    </div>

    <div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
      <div class="modal-dialog" role="document">
        <div class="modal-content">
          <div class="modal-header">
            <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
            <h4 class="modal-title" id="myModalLabel" style="text-align: center;"><span id="myModalLabelDate">%DATE%</span></h4>
          </div>
          <div class="modal-body">
            <!-- Nav tabs -->
            <ul class="nav nav-tabs" role="tablist">
              <li role="presentation" class="active"><a href="#training" aria-controls="home" role="tab" data-toggle="tab">New Training</a></li>
              <li role="presentation"><a href="#tournament" aria-controls="profile" role="tab" data-toggle="tab">New Tournament</a></li>
            </ul>

            <!-- Tab panes -->
            <div class="tab-content row" >
              <div role="tabpanel" class="tab-pane active" id="training">
                <form class="form-horizontal col-xs-12" style="margin-top: 10px;">
                  <div class="form-group">
                      <label for="inputDate" class="col-xs-2 control-label">Date</label>
                      <div class="col-xs-4">
                          <div class="input-group">
                              <div class="input-group-addon"><span class="glyphicon glyphicon-calendar"></span></div><input disabled type="text" class="form-control" id="inputDate" placeholder="date">
                          </div>
                      </div>
                      <label for="inputTime" class="col-xs-2 control-label">Hour</label>
                      <div class="col-xs-4">
                          <div class="input-group">
                              <div class="input-group-addon"><span class="glyphicon glyphicon-time"></span></div><input type="text" class="form-control" id="inputTime" placeholder="when">
                          </div>
                      </div>
                  </div>
                    <div class="form-group">
                        <label for="inputCategory" class="col-sm-2 control-label">Category</label>
                        <div class="col-sm-10">
                            <select class="form-control" id="inputCategory">
                                <option value="A">A</option>
                                <option value="B">B</option>
                                <option value="C">C</option>
                                <option value="D">D</option>
                                <option value="E">E</option>
                            </select>
                        </div>
                    </div>
                    <div class="form-group">
                        <label for="inputExercise" class="col-sm-2 control-label">Exercise</label>
                        <div class="col-sm-10">
                            <select class="form-control" id="inputExercise">
                                <option value="1">1</option>
                                <option value="2">2</option>
                                <option value="3">3</option>
                                <option value="4">4</option>
                                <option value="5">5</option>
                            </select>
                        </div>
                    </div>
                    <div class="form-group">
                        <label for="inputParticipants" class="col-sm-2 control-label">Participants</label>
                        <div class="col-sm-10">
                            <input type="text" class="form-control" id="inputParticipants" placeholder="participants">
                        </div>
                    </div>
                    <div class="form-group">
                        <div id="participants" class="col-sm-offset-2 col-sm-10">

                        </div>
                    </div>
                    <div class="form-group">
                        <div class="col-sm-offset-2 col-sm-10">
                            <button id="new-training" type="submit" class="btn btn-default" style="float: right;"><span class="glyphicon glyphicon-floppy-disk"></span> Add Training</button>
                        </div>
                    </div>
                  </form>
              </div>
              <div role="tabpanel" class="tab-pane" id="tournament">
                <form class="form-horizontal col-xs-12" style="margin-top: 10px;">
                  <div class="form-group">
                      <label for="inputDate2" class="col-xs-2 control-label">Date</label>
                      <div class="col-xs-4">
                          <div class="input-group">
                              <div class="input-group-addon"><span class="glyphicon glyphicon-calendar"></span></div><input disabled type="text" class="form-control" id="inputDate2" placeholder="date">
                          </div>
                      </div>
                      <label for="inputTime2" class="col-xs-2 control-label">Hour</label>
                      <div class="col-xs-4">
                          <div class="input-group">
                              <div class="input-group-addon"><span class="glyphicon glyphicon-time"></span></div><input type="text" class="form-control" id="inputTime2" placeholder="when">
                          </div>
                      </div>
                  </div>
                    <div class="form-group">
                        <label for="inputCategory2" class="col-sm-2 control-label">Category</label>
                        <div class="col-sm-10">
                            <select class="form-control" id="inputCategory2">
                                <option value="A">A</option>
                                <option value="B">B</option>
                                <option value="C">C</option>
                                <option value="D">D</option>
                                <option value="E">E</option>
                            </select>
                        </div>
                    </div>
                    <div class="form-group">
                        <label for="inputSuscription" class="col-sm-2 control-label">Suscription</label>
                        <div class="col-sm-10">
                            <select class="form-control" id="inputSuscription">
                                <option value="Open">Open</option>
                                <option value="Private">Private</option>
                                <option value="RFID">RFID</option>
                            </select>
                        </div>
                    </div>
                    <div class="form-group">
                        <label for="type" class="col-sm-2 control-label">Type</label>
                        <div class="col-xs-3">
                          <div class="radio">
                              <label>
                                <input type="radio" name="type" id="optionsRadios1" value="popular" checked>
                                Popular
                              </label>
                          </div>
                        </div>
                        <div class="col-xs-3">
                          <div class="radio">
                              <label>
                                <input type="radio" name="type" id="optionsRadios2" value="official">
                                Official
                              </label>
                          </div>
                        </div>
                    </div>
                    <div class="form-group">
                        <div class="col-sm-offset-2 col-sm-10">
                            <button id="new-tournament" type="submit" class="btn btn-default" style="float: right;"><span class="glyphicon glyphicon-floppy-disk"></span> Add Tournament</button>
                        </div>
                    </div>
                  </form>
              </div>
            </div>

          </div>
        </div>
      </div>
    </div>

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
    <script src="../js/underscore-min.js"></script>
    <script src="../js/bootstrap.min.js"></script>
    <script src="https://use.fontawesome.com/60130e230f.js"></script>
    <script src="../js/moment-with-locales.js"></script>
    <script src="../js/calendar.js"></script>
    <script src="../js/common.js"></script>
    <script src="../js/bootstrap-datetimepicker.min.js"></script>
    <script src="../js/typeahead.bundle.js"></script>
    <script src="../js/handlebars-v4.0.5.js"></script>
    <script>
        var calendar;
        $(function() {
            $('#inputTime').datetimepicker({format: 'LT'});

            $('#inputTime2').datetimepicker({format: 'LT'});

            var substringMatcher = function(strs) {
            return function findMatches(q, cb) {
              var matches, substringRegex;

              // an array that will be populated with substring matches
              matches = [];

              // regex used to determine if a string contains the substring `q`
              substrRegex = new RegExp(q, 'i');

              // iterate through the pool of strings and for any string that
              // contains the substring `q`, add it to the `matches` array
              $.each(strs, function(i, str) {
                if (substrRegex.test(str)) {
                  matches.push(str);
                }
              });

              cb(matches);
            };
          };

          var fencers = [
            {value: "Jorge Urbina",img: "https://ing-jorgeu.github.io/img/profile.png"},
            {value: "Tai Duffel",img: "https://ing-jorgeu.github.io/img/profile.png"},
            {value: "Lelah Scarbrough",img: "https://ing-jorgeu.github.io/img/profile.png"},
            {value: "Janis Balsamo",img: "https://ing-jorgeu.github.io/img/profile.png"},
            {value: "Arden Beech",img: "https://ing-jorgeu.github.io/img/profile.png"},
            {value: "Etha Trees",img: "https://ing-jorgeu.github.io/img/profile.png"},
            {value: "Alessandra Near",img: "https://ing-jorgeu.github.io/img/profile.png"},
            {value: "Jeraldine Saechao",img: "https://ing-jorgeu.github.io/img/profile.png"},
            {value: "Nakia Gainer",img: "https://ing-jorgeu.github.io/img/profile.png"},
            {value: "Erline Elsass",img: "https://ing-jorgeu.github.io/img/profile.png"},
            {value: "Chung Rocker",img: "https://ing-jorgeu.github.io/img/profile.png"},
            {value: "Heidi Azar",img: "https://ing-jorgeu.github.io/img/profile.png"},
            {value: "Brigid Clowers",img: "https://ing-jorgeu.github.io/img/profile.png"},
            {value: "Toby Pellegren",img: "https://ing-jorgeu.github.io/img/profile.png"},
            {value: "Armanda Crossley",img: "https://ing-jorgeu.github.io/img/profile.png"},
            {value: "Vi Petteway",img: "https://ing-jorgeu.github.io/img/profile.png"},
            {value: "Aundrea Seawright",img: "https://ing-jorgeu.github.io/img/profile.png"},
            {value: "Norine Maloy",img: "https://ing-jorgeu.github.io/img/profile.png"},
            {value: "Phyliss Pilson",img: "https://ing-jorgeu.github.io/img/profile.png"},
            {value: "Nicolas Elzy",img: "https://ing-jorgeu.github.io/img/profile.png"},
            {value: "Veronique Grunewald",img: "https://ing-jorgeu.github.io/img/profile.png"},
            {value: "Felicita Laverriere",img: "https://ing-jorgeu.github.io/img/profile.png"},
            {value: "Toya Balcom",img: "https://ing-jorgeu.github.io/img/profile.png"},
            {value: "Gwenda Neblett",img: "https://ing-jorgeu.github.io/img/profile.png"},
            {value: "Rudolf Kellems",img: "https://ing-jorgeu.github.io/img/profile.png"},
            {value: "Emmanuel Mckean",img: "https://ing-jorgeu.github.io/img/profile.png"},
            {value: "Tobie Rehman",img: "https://ing-jorgeu.github.io/img/profile.png"},
            {value: "Portia Mcmurray",img: "https://ing-jorgeu.github.io/img/profile.png"},
            {value: "Aracely Wagoner",img: "https://ing-jorgeu.github.io/img/profile.png"},
            {value: "Mckinley Lorentzen",img: "https://ing-jorgeu.github.io/img/profile.png"},
            {value: "Marchelle Blanton",img: "https://ing-jorgeu.github.io/img/profile.png"},
            {value: "Nu Bly",img: "https://ing-jorgeu.github.io/img/profile.png"},
            {value: "Lashonda Shadwick",img: "https://ing-jorgeu.github.io/img/profile.png"},
            {value: "Hester Strack",img: "https://ing-jorgeu.github.io/img/profile.png"},
            {value: "Jade Lindley",img: "https://ing-jorgeu.github.io/img/profile.png"},
            {value: "Debbie Frisch",img: "https://ing-jorgeu.github.io/img/profile.png"},
            {value: "Blanch Strouth",img: "https://ing-jorgeu.github.io/img/profile.png"},
            {value: "Tamica Kissinger",img: "https://ing-jorgeu.github.io/img/profile.png"},
            {value: "Annalee Cousino",img: "https://ing-jorgeu.github.io/img/profile.png"},
            {value: "Toi Loflin",img: "https://ing-jorgeu.github.io/img/profile.png"},
            {value: "Taisha Makris",img: "https://ing-jorgeu.github.io/img/profile.png"},
            {value: "Richie Ye",img: "https://ing-jorgeu.github.io/img/profile.png"},
            {value: "Eneida Corey",img: "https://ing-jorgeu.github.io/img/profile.png"},
            {value: "Renna Morneau",img: "https://ing-jorgeu.github.io/img/profile.png"},
            {value: "Twanda Lant",img: "https://ing-jorgeu.github.io/img/profile.png"},
            {value: "Todd Musso",img: "https://ing-jorgeu.github.io/img/profile.png"},
            {value: "Gregory Deakins",img: "https://ing-jorgeu.github.io/img/profile.png"},
            {value: "Reynalda Collingwood",img: "https://ing-jorgeu.github.io/img/profile.png"},
            {value: "Loretta Cartier",img: "https://ing-jorgeu.github.io/img/profile.png"},
            {value: "Roseanna Hannold",img: "https://ing-jorgeu.github.io/img/profile.png"},
            {value: "Ali Procopio",img: "https://ing-jorgeu.github.io/img/profile.png"}
          ];

          var states = new Bloodhound({
            datumTokenizer: Bloodhound.tokenizers.obj.whitespace('value'),
            queryTokenizer: Bloodhound.tokenizers.whitespace,
            local: fencers
          });

          $('#inputParticipants').typeahead({
            hint: true,
            highlight: true,
            minLength: 1
          },
          {
            name: 'states',
            source: states,
            display: 'value',
            templates: {
              empty: [
                '<div class="empty-message">',
                  'unable to find fencer',
                '</div>'
              ].join('\n'),
              suggestion: Handlebars.compile('<div><img src="{{img}}"> <strong>{{value}}</strong></div>')
            }
          });

          $('#inputParticipants').bind('typeahead:select', function(ev, suggestion) {
              $("#participants").append("<div class='col-xs-6'><div class='participant'><img src='" + suggestion.img + "'>" + suggestion.value + "</div></div>");
          });

          var trainings = localStorage.trainings;
          if (trainings){
              trainings = JSON.parse(trainings);
          } else {
              trainings = [];
          }

          var tournaments = localStorage.tournaments;
          if (tournaments){
              tournaments = JSON.parse(tournaments);
          } else {
              tournaments = [];
          }

          calendar = $("#calendar").calendar(
          {
              tmpl_path: "tmpls/",
              events_source: trainings.concat(tournaments)
          });

          $("#new-training").click(function (e) {
              var newTraining = {
                "id": Math.floor(Math.random()*100000),
                "title": "Training - " + $("#inputCategory").val() + "/" + $("#inputExercise").val(),
                "category": $("#inputCategory").val(),
                "exercise": $("#inputExercise").val(),
                "url": "../tournaments/new-tournament.html",
                "class": "event-important",
                "start": moment($('#inputDate').val() + " " + $('#inputTime').val(), "YYYY-MM-DD hh:mm a").unix()*1000,
                "end": moment($('#inputDate').val() + " " + $('#inputTime').val(), "YYYY-MM-DD hh:mm a").unix()*1000
              };
              trainings.push(newTraining);
              localStorage.trainings = JSON.stringify(trainings);
              window.location = "";
          });

          $("#new-tournament").click(function (e) {
              var newTournament = {
                "id": Math.floor(Math.random()*100000),
                "title": "Tournament - " + $("#inputCategory2").val() + "/" + $("#inputSuscription").val(),
                "category": $("#inputCategory2").val(),
                "suscription": $("#inputSuscription").val(),
                "type": $('input[name="type"]:checked').val(),
                "url": "http://example.com",
                "class": "event-info",
                "start": moment($('#inputDate2').val() + " " + $('#inputTime2').val(), "YYYY-MM-DD hh:mm a").unix()*1000,
                "end": moment($('#inputDate2').val() + " " + $('#inputTime2').val(), "YYYY-MM-DD hh:mm a").unix()*1000
              };
              tournaments.push(newTournament);
              localStorage.tournaments = JSON.stringify(tournaments);
              window.location = "";
          });


          $(window).on('resize', function(e) {
              var height = $(this).height();
              $('.cal-month-day').height(function (i,h){return Math.floor((height-120)/6);});
          });

          setTimeout(function() {
              $(window).resize();
          },500);


        });


    </script>
</body>
</html>
