<!doctype html>
<html>
<head>
    <meta charset="utf-8">

    <title>Seyfor</title>
    <meta name="description" content="Fencing">
    <meta name="author" content="ing.jorgeu@gmail.com">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link href="../css/bootstrap.min.css" rel="stylesheet">
    <link href="../css/bootstrap-theme.min.css" rel="stylesheet">
    <link href="../css/bootstrap-datetimepicker.min.css" rel="stylesheet">
    <link href="../css/style.css" rel="stylesheet">

</head>
<body>
  <nav class="navbar navbar-default navbar-static-top" style="">
    <div class="container-fluid">
        <!-- Brand and toggle get grouped for better mobile display -->
        <div class="navbar-header">
          <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1" aria-expanded="false">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>
          <a class="navbar-brand" href="#">
            <img alt="Brand" src="../img/seyfor_sport_technology_logo.png">
          </a>
        </div>

        <!-- Collect the nav links, forms, and other content for toggling -->
        <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
          <ul class="nav navbar-nav">
            <li><a id="today">Today</a></li>
          </ul>
          <ul class="nav navbar-nav navbar-right">
            <li>
              <a href="#" style="">
                Jorge Urbina
              </a>
            </li>
            <li>
              <a href="#" style="padding: 2px 2px 2px 0;">
                <img src="../img/profile.png" style="height: 46px;border: 2px solid black;border-radius: 30px;">
              </a>
            </li>
          </ul>
        </div><!-- /.navbar-collapse -->
    </div><!-- /.container-fluid -->
    </nav>


    <div id="leftbar" class="leftbar-outer">
        <div class="leftbar-middle">
            <div class="leftbar-inner">
                <a id="leftbar-toggler" href="#" onclick="$('#leftbar').toggleClass('open');$('#leftbar-toggler .glyphicon').toggleClass('glyphicon-menu-right').toggleClass('glyphicon-menu-left');"><span class="glyphicon glyphicon-menu-right" aria-hidden="true" style="font-size: 17px;"></span></a>
                <ul style="list-style-type: none;padding-left: 0;">
                    <li class="leftbar-icon"><a href="index.html"><i class="fa fa-home" aria-hidden="true"></i> <span>Home</span></a></li>
                    <li class="leftbar-icon active"><a href="../trainings/index.html"><i class="fa fa-pie-chart" aria-hidden="true"></i> <span>Trainings</span></a></li>
                    <li class="leftbar-icon"><a href="../tournaments/new-tournament.html"><i class="fa fa-trophy" aria-hidden="true"></i> <span>Tournaments</span></a></li>
                    <li class="leftbar-icon"><a href="../fencers/index.html"><i class="fa fa-users" aria-hidden="true"></i> <span>Fencers</span></a></li>
                    <li class="leftbar-icon"><a href="#"><i class="fa fa-hourglass" aria-hidden="true" style="margin: 0 11px;"></i> <span>Week Program</span></a></li>
                    <li class="leftbar-icon"><a href="../calendar/index.html"><i class="fa fa-calendar" aria-hidden="true"></i> <span>Calendar</span></a></li>
                </ul>
            </div>
        </div>
    </div>

    <div id="content" class="leftbar-outer">
        <div class="leftbar-middle">
            <div class="leftbar-inner">
              <div class="container">
                  <div class="row">
                    <form class="form-horizontal col-xs-12" style="margin-top: 10px;">
                      <div class="form-group">
                          <label for="inputDate" class="col-xs-2 control-label">Date</label>
                          <div class="col-xs-5">
                              <div class="input-group">
                                  <div class="input-group-addon"><span class="glyphicon glyphicon-calendar"></span></div><input type="text" class="form-control" id="inputDate" placeholder="date">
                              </div>
                          </div>
                          <label for="inputTime" class="col-xs-1 control-label">Hour</label>
                          <div class="col-xs-4">
                              <div class="input-group">
                                  <div class="input-group-addon"><span class="glyphicon glyphicon-time"></span></div><input type="text" class="form-control" id="inputTime" placeholder="when">
                              </div>
                          </div>
                      </div>
                        <div class="form-group">
                            <label for="inputCategory" class="col-xs-2 control-label">Category</label>
                            <div class="col-xs-10">
                                <select class="form-control" id="inputCategory">
                                    <option value="A">A</option>
                                    <option value="B">B</option>
                                    <option value="C">C</option>
                                    <option value="D">D</option>
                                    <option value="E">E</option>
                                </select>
                            </div>
                        </div>
                        <div class="form-group">
                            <label for="inputExercise" class="col-xs-2 control-label">Exercise</label>
                            <div class="col-xs-10">
                                <select class="form-control" id="inputExercise">
                                    <option value="1">1</option>
                                    <option value="2">2</option>
                                    <option value="3">3</option>
                                    <option value="4">4</option>
                                    <option value="5">5</option>
                                </select>
                            </div>
                        </div>
                        <div class="form-group">
                            <label for="inputParticipants" class="col-xs-2 control-label">Participants</label>
                            <div class="col-xs-10">
                                <input type="text" class="form-control" id="inputParticipants" placeholder="participants">
                            </div>
                        </div>
                        <div class="form-group">
                            <div id="participants" class="col-xs-offset-2 col-xs-10">

                            </div>
                        </div>
                        <div class="form-group">
                            <div class="col-xs-offset-2 col-xs-10">
                                <button id="new-training" type="submit" class="btn btn-default" style="float: right;"><span class="glyphicon glyphicon-floppy-disk"></span> Add Training</button>
                            </div>
                        </div>
                      </form>
                  </div>
              </div>
            </div>
        </div>

    </div>

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
    <script src="../js/underscore-min.js"></script>
    <script src="../js/bootstrap.min.js"></script>
    <script src="https://use.fontawesome.com/60130e230f.js"></script>
    <script src="../js/moment-with-locales.js"></script>
    <script src="../js/calendar.js"></script>
    <script src="../js/common.js"></script>
    <script src="../js/bootstrap-datetimepicker.min.js"></script>
    <script src="../js/typeahead.bundle.js"></script>
    <script src="../js/handlebars-v4.0.5.js"></script>
    <script>
        var participants = [];
        $(function() {
            $('#inputTime').datetimepicker({format: 'LT', defaultDate: moment()});
            $('#inputDate').datetimepicker({format: 'YYYY-MM-DD', defaultDate: moment()});



            var states = new Bloodhound({
              datumTokenizer: Bloodhound.tokenizers.obj.whitespace('value'),
              queryTokenizer: Bloodhound.tokenizers.whitespace,
              local: fencers
            });

            $('#inputParticipants').typeahead({
              hint: true,
              highlight: true,
              minLength: 1
            },
            {
              name: 'states',
              source: states,
              display: 'value',
              templates: {
                empty: [
                  '<div class="empty-message">',
                    'unable to find fencer',
                  '</div>'
                ].join('\n'),
                suggestion: Handlebars.compile('<div><img src="{{img}}"> <strong style="color: black;">{{value}}</strong></div>')
              }
            });

            $('#inputParticipants').bind('typeahead:select', function(ev, suggestion) {
                $("#participants").append("<div class='col-xs-6'><div class='participant'><img src='" + suggestion.img + "'>" + suggestion.value + "</div></div>");
                participants.push(suggestion.id);
            });

            var trainings = localStorage.trainings;
            if (trainings){
                trainings = JSON.parse(trainings);
            } else {
                trainings = [];
            }

            $("#new-training").click(function (e) {
                var newTraining = {
                  "id": Math.floor(Math.random()*100000),
                  "title": "Training - " + $("#inputCategory").val() + "/" + $("#inputExercise").val(),
                  "category": $("#inputCategory").val(),
                  "exercise": $("#inputExercise").val(),
                  "url": "http://example.com",
                  "class": "event-important",
                  "start": moment($('#inputDate').val() + " " + $('#inputTime').val(), "YYYY-MM-DD hh:mm a").unix()*1000,
                  "end": moment($('#inputDate').val() + " " + $('#inputTime').val(), "YYYY-MM-DD hh:mm a").unix()*1000,
                  "participants": participants
                };
                trainings.push(newTraining);
                localStorage.trainings = JSON.stringify(trainings);
                window.location = "../calendar/index.html";
            });

            $("form").submit(function (e){e.preventDefault();});
        });
    </script>
</body>
</html>
